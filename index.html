<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ODE Generation and Integration • odin</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="bootstrap-toc.css">
<script src="bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="ODE Generation and Integration">
<meta property="og:description" content="Generate systems of ordinary differential equations
    (ODE) and integrate them, using a domain specific language
    (DSL).  The DSL uses Rs syntax, but compiles to C in order to
    efficiently solve the system.  A solver is not provided, but
    instead interfaces to the packages deSolve and dde are
    generated.  With these, while solving the differential equations,
    no allocations are done and the calculations remain entirely in
    compiled code.  Alternatively, a model can be transpiled to R for
    use in contexts where a C compiler is not present.  After
    compilation, models can be inspected to return information about
    parameters and outputs, or intermediate values after calculations.
    odin' is not targeted at any particular domain and is suitable
    for any system that can be expressed primarily as mathematical
    expressions.  Additional support is provided for working with
    delays (delay differential equations, DDE), using interpolated
    functions during interpolation, and for integrating quantities
    that represent arrays.">
<meta property="og:image" content="/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">odin</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">1.5.10</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="articles/odin.html">Get started</a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="articles/debugging.html">debugging</a>
    </li>
    <li>
      <a href="articles/discrete.html">odin discrete models</a>
    </li>
    <li>
      <a href="articles/functions.html">odin functions</a>
    </li>
    <li>
      <a href="articles/guide.html">Guide to odin docs</a>
    </li>
  </ul>
</li>
<li>
  <a href="news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/mrc-ide/odin/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="contents col-md-9">
<div class="section level1">
<div class="page-header"><h1 id="odin-">odin <img src="reference/figures/logo.png" align="right" height="139"><a class="anchor" aria-label="anchor" href="#odin-"></a>
</h1></div>
<!-- badges: start -->

<p><code>odin</code> implements a high-level language for describing and implementing ordinary differential equations in R. It provides a “domain specific language” (DSL) which <em>looks</em> like R but is compiled directly to C. The actual solution of the differential equations is done with the <a href="https://cran.r-project.org/package=deSolve" class="external-link"><code>deSolve</code></a> package, giving access to the excellent Livermore solvers (<code>lsoda</code>, <code>lsode</code>, etc), or with <a href="https://cran.r-project.org/package=dde" class="external-link"><code>dde</code></a> for use with delay differential equations.</p>
<ul>
<li>The DSL is <em>declarative</em> reflecting the mathematical nature of the equations (typically ordinary differential equations are simple mathematical relationships, so the order should not matter).</li>
<li>It includes support for equations that involve vectors, matrices and higher dimensional arrays (up to 8!), including a high-level array indexing notation that removes the need for explicit looping.</li>
<li>Delay differential equations are supported, including when the delayed quantities are arbitrarily complicated expressions of variables.</li>
<li>Interpolation functions can be used to include time-varying quantities into the model (piecewise constant, linear and spline interpolation is supported, using <a href="https://cran.r-project.org/package=cinterpolate" class="external-link"><code>cinterpolate</code></a>.</li>
<li>The equations are analysed before compilation so that parts that do not depend on time are not included in the final derivative calculations.</li>
<li>Supports user-supplied parameters for any part of the system.</li>
<li>Supports a large number of mathematical functions (see the <a href="https://mrc-ide.github.io/odin/articles/functions.html" class="external-link">functions vignette</a>) for a complete list.</li>
</ul>
<p>In addition, the same machinery can be used to generate discrete-time models that proceed over a set of steps (rather than through continuous time). These may be stochastic and make use of any of R’s random number functions.</p>
<p><code>odin</code> works using code generation; the nice thing about this approach is that it never gets bored. So if the generated code has lots of tedious repetitive bits, they’re at least likely to be correct (compared with implementing yourself).</p>
<p>There are lots of other things you can do with odin models, see <a href="https://mrc-ide.github.io/odin/articles/guide.html" class="external-link">the guide</a> to work out where to start.</p>
<div class="section level2">
<h2 id="background">Background<a class="anchor" aria-label="anchor" href="#background"></a>
</h2>
<p>The “deSolve” package for R is the de-facto way of solving differential equations in R; it provides excellent solvers and has remained stable for over a decade. However, users must implement equations in R and suffer a large speed cost, or implement their equations in C which is (depending on the complexity of the system) either routine and a bit boring, or complicated and error prone. This translation can be especially complicated with delay differential equations, or with models where the variables are more naturally stored as variable sized arrays.</p>
<p>Apparently not many people know that <code>deSolve</code> can use target functions written in C rather than just in R. This is described in detail in the excellent “compiledCode” vignette (<code>vignette("compiledCode")</code> or <a href="https://cran.r-project.org/package=deSolve/vignettes/compiledCode.pdf" class="external-link">online</a>.</p>
<p>While the <code>deSolve</code> authors are bearish on the benefits of this, I have often seen performance improvements of over 100x. Where an ODE is being used in application where it is called repeatedly (e.g., an optimisation or MCMC) the cost of rewriting the system pays itself back.</p>
<p>For simple systems the rewriting is essentially mechanical. The lorenz attractor could be implemented in R as:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">lorenz</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">t</span>, <span class="va">y</span>, <span class="va">parms</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">sigma</span> <span class="op">&lt;-</span> <span class="va">parms</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span></span>
<span>  <span class="va">R</span> <span class="op">&lt;-</span> <span class="va">parms</span><span class="op">[</span><span class="fl">2</span><span class="op">]</span></span>
<span>  <span class="va">b</span> <span class="op">&lt;-</span> <span class="va">parms</span><span class="op">[</span><span class="fl">3</span><span class="op">]</span></span>
<span>  <span class="va">y1</span> <span class="op">&lt;-</span> <span class="va">y</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span></span>
<span>  <span class="va">y2</span> <span class="op">&lt;-</span> <span class="va">y</span><span class="op">[</span><span class="fl">2</span><span class="op">]</span></span>
<span>  <span class="va">y3</span> <span class="op">&lt;-</span> <span class="va">y</span><span class="op">[</span><span class="fl">3</span><span class="op">]</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">sigma</span> <span class="op">*</span> <span class="op">(</span><span class="va">y2</span> <span class="op">-</span> <span class="va">y1</span><span class="op">)</span>,</span>
<span>         <span class="va">R</span> <span class="op">*</span> <span class="va">y1</span> <span class="op">-</span> <span class="va">y2</span> <span class="op">-</span> <span class="va">y1</span> <span class="op">*</span> <span class="va">y3</span>,</span>
<span>         <span class="op">-</span><span class="va">b</span> <span class="op">*</span> <span class="va">y3</span> <span class="op">+</span> <span class="va">y1</span> <span class="op">*</span> <span class="va">y2</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
<p>and in C as</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> initmod<span class="op">(</span><span class="dt">void</span> <span class="op">(*</span> odeparms<span class="op">)(</span><span class="dt">int</span> <span class="op">*,</span> <span class="dt">double</span> <span class="op">*))</span> <span class="op">{</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">int</span> N<span class="op">=</span><span class="dv">3</span><span class="op">;</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>  odeparms<span class="op">(&amp;</span>N<span class="op">,</span> parms<span class="op">);</span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> lorenz<span class="op">(</span><span class="dt">int</span> <span class="op">*</span>n<span class="op">,</span> <span class="dt">double</span> <span class="op">*</span>t<span class="op">,</span> <span class="dt">double</span> <span class="op">*</span>y<span class="op">,</span> <span class="dt">double</span> <span class="op">*</span>dydt<span class="op">,</span> <span class="dt">double</span> <span class="op">*</span>yout<span class="op">,</span> <span class="dt">int</span> <span class="op">*</span>ip<span class="op">)</span> <span class="op">{</span></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>  <span class="dt">double</span> sigma <span class="op">=</span> parms<span class="op">[</span><span class="dv">0</span><span class="op">];</span></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>  <span class="dt">double</span> R <span class="op">=</span> parms<span class="op">[</span><span class="dv">1</span><span class="op">];</span></span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>  <span class="dt">double</span> b <span class="op">=</span> parms<span class="op">[</span><span class="dv">2</span><span class="op">];</span></span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a>  <span class="dt">double</span> y1 <span class="op">=</span> y<span class="op">[</span><span class="dv">0</span><span class="op">];</span></span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a>  <span class="dt">double</span> y2 <span class="op">=</span> y<span class="op">[</span><span class="dv">2</span><span class="op">];</span></span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a>  <span class="dt">double</span> y3 <span class="op">=</span> y<span class="op">[</span><span class="dv">3</span><span class="op">];</span></span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a>  dydt<span class="op">[</span><span class="dv">0</span><span class="op">]</span> <span class="op">=</span> sigma <span class="op">*</span> <span class="op">(</span>y2 <span class="op">-</span> y1<span class="op">);</span></span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a>  dydt<span class="op">[</span><span class="dv">1</span><span class="op">]</span> <span class="op">=</span> R <span class="op">*</span> y1 <span class="op">-</span> y2 <span class="op">-</span> y1 <span class="op">*</span> y3<span class="op">;</span></span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a>  dydt<span class="op">[</span><span class="dv">2</span><span class="op">]</span> <span class="op">=</span> <span class="op">-</span>b <span class="op">*</span> y3 <span class="op">+</span> y1 <span class="op">*</span> y2<span class="op">;</span></span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<p>The connection between the two languages should be fairly obvious. As systems get more complicated much of the difficulty of writing the systems in C becomes the tedium of book keeping as parameters and state vectors are unpacked, rather than any deep programming challenges. Modifying large systems is a particular challenge as technical debt can accrue quickly.</p>
<p>The core job of <code>odin</code> is to simplify this transition so that models can be both developed and solved rapidly.</p>
</div>
<div class="section level2">
<h2 id="example">Example<a class="anchor" aria-label="anchor" href="#example"></a>
</h2>
<p>The Lorenz attractor above can be implemented as:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">lorenz</span> <span class="op">&lt;-</span> <span class="fu">odin</span><span class="fu">::</span><span class="fu"><a href="reference/odin.html">odin</a></span><span class="op">(</span><span class="op">{</span></span>
<span>  <span class="co">## Derivatives</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/stats/deriv.html" class="external-link">deriv</a></span><span class="op">(</span><span class="va">y1</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="va">sigma</span> <span class="op">*</span> <span class="op">(</span><span class="va">y2</span> <span class="op">-</span> <span class="va">y1</span><span class="op">)</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/stats/deriv.html" class="external-link">deriv</a></span><span class="op">(</span><span class="va">y2</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="va">R</span> <span class="op">*</span> <span class="va">y1</span> <span class="op">-</span> <span class="va">y2</span> <span class="op">-</span> <span class="va">y1</span> <span class="op">*</span> <span class="va">y3</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/stats/deriv.html" class="external-link">deriv</a></span><span class="op">(</span><span class="va">y3</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="op">-</span><span class="va">b</span> <span class="op">*</span> <span class="va">y3</span> <span class="op">+</span> <span class="va">y1</span> <span class="op">*</span> <span class="va">y2</span></span>
<span></span>
<span>  <span class="co">## Initial conditions</span></span>
<span>  <span class="fu">initial</span><span class="op">(</span><span class="va">y1</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fl">10.0</span></span>
<span>  <span class="fu">initial</span><span class="op">(</span><span class="va">y2</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fl">1.0</span></span>
<span>  <span class="fu">initial</span><span class="op">(</span><span class="va">y3</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fl">1.0</span></span>
<span></span>
<span>  <span class="co">## parameters</span></span>
<span>  <span class="va">sigma</span> <span class="op">&lt;-</span> <span class="fl">10.0</span></span>
<span>  <span class="va">R</span>     <span class="op">&lt;-</span> <span class="fl">28.0</span></span>
<span>  <span class="va">b</span>     <span class="op">&lt;-</span>  <span class="fl">8.0</span> <span class="op">/</span> <span class="fl">3.0</span></span>
<span><span class="op">}</span><span class="op">)</span></span></code></pre></div>
<p>The connection to the R and C versions in the section above should be fairly clear. The code above is never actually evaluated though; instead it is parsed and used to build up C code for the model.</p>
<p>Note that this includes initial conditions; all odin models include specifications for initial conditions because the ordering of the variables is arbitrary and may be re-ordered.</p>
<p>This generates an object that can be used to integrate the set of differential equations, by default starting at the initial conditions specified above (though custom initial conditions can be given). The equations are translated into C, compiled, loaded, and bundled into an object. <code>lorenz</code> here is a function that generates an instance of the model.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mod</span> <span class="op">&lt;-</span> <span class="fu">lorenz</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">t</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">100</span>, length.out <span class="op">=</span> <span class="fl">50000</span><span class="op">)</span></span>
<span><span class="va">y</span> <span class="op">&lt;-</span> <span class="va">mod</span><span class="op">$</span><span class="fu">run</span><span class="op">(</span><span class="va">t</span><span class="op">)</span></span></code></pre></div>
<p>For more complicated examples, check out an <a href="https://github.com/mrc-ide/odin/blob/master/tests/testthat/examples/array_odin.R" class="external-link">age structured SIR model</a>, and for more details see the <a href="https://mrc-ide.github.io/odin/articles/odin.html" class="external-link">main package vignette</a></p>
</div>
<div class="section level2">
<h2 id="limitations">Limitations<a class="anchor" aria-label="anchor" href="#limitations"></a>
</h2>
<p>Writing this has given me a much greater appreciation of the difficulties of writing compiler error messages.</p>
<p>This does not attempt to <em>generally</em> translate R into C (though very simple expressions are handled) but only a small subset that follows the stereotyped way that R+C ODE models tend to be written. It tries to do things like minimise the number of memory allocations while preventing leaks. The generated code is designed to be straightforward to read, leaving any really funky optimisation to the compiler.</p>
<p>Because this relies on code generation, and the approach is partly textual, some oddities will appear in the generated code (things like <code>n + 0</code>). Over time I’ll remove the most egregious of these. It’s probable that there will be some unused variables, and unused elements in the parameters struct.</p>
</div>
<div class="section level2">
<h2 id="prior-work">Prior work<a class="anchor" aria-label="anchor" href="#prior-work"></a>
</h2>
<p>ODEs seem particularly suitable for code generation, perhaps because of the relative simplicity of the code. As such, there is a lot of prior work in this area. Many of these tools are heavily tailored to suit a particular domain.</p>
<p>In R:</p>
<ul>
<li>
<a href="https://cran.r-project.org/package=RxODE" class="external-link"><code>RxODE</code></a> - focussed on pharmacokinetic models, but suitable in the same domain as many odin models. Does not include support for delay equations, automatic arrays or discrete/stochastic systems and uses it’s own solvers rather than interfacing with existing ones. Notably it also uses R as the host language for the DSL rather than requiring the user to write code in strings or in a custom language.</li>
<li>
<a href="https://cran.r-project.org/package=rodeo" class="external-link"><code>rodeo</code></a> focussed on biochemical reactions based around the <a href="https://en.wikipedia.org/wiki/Petersen_matrix" class="external-link">Petersen matrix</a>. Creates code for use with <a href="https://cran.r-project.org/package=deSolve" class="external-link"><code>deSolve</code></a>
</li>
<li>
<a href="https://cran.r-project.org/package=deSolve" class="external-link"><code>cOde</code></a> creates code for use with <a href="https://cran.r-project.org/package=deSolve" class="external-link"><code>deSolve</code></a> and <a href="https://cran.r-project.org/package=deSolve" class="external-link"><code>bvpSolve</code></a>. Models are entered as vector of strings which resembles C or R code. Automatic generation of Jacobian matrices is supported.</li>
<li>
<a href="https://cran.r-project.org/package=mrgsolve" class="external-link"><code>mrgsolve</code></a> is focussed on models in quantitative pharmacology and systems biology. It bundles its own solvers, and uses it’s own <code>PKMODEL</code> language (<a href="https://github.com/metrumresearchgroup/mrgsolve/blob/master/inst/models/pk1.cpp" class="external-link">example</a>).</li>
</ul>
<p>In other languages:</p>
<ul>
<li>
<a href="https://hackage.haskell.org/package/Paraiso" class="external-link"><code>Paraiso</code></a> in Haskell</li>
<li>
<a href="https://github.com/WarrenWeckesser/vfgen" class="external-link"><code>VFGEN</code></a> in C++</li>
<li>
<a href="https://github.com/ukhsa-collaboration/pygom" class="external-link"><code>pygom</code></a> in Python for solving compartmental models</li>
</ul>
</div>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>Install odin from CRAN with</p>
<pre><code><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"odin"</span><span class="op">)</span></span></code></pre>
<p>Alternatively, you can install a potentially more recent version of odin from the <a href="https://mrc-ide.github.io/drat/" class="external-link"><code>mrc-ide</code> drat repository</a></p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># install.packages("drat") # -- if you don't have drat installed</span></span>
<span><span class="fu">drat</span><span class="fu">:::</span><span class="fu">add</span><span class="op">(</span><span class="st">"mrc-ide"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"odin"</span><span class="op">)</span></span></code></pre></div>
<p>You will need a compiler to install dependencies for the package, and to build any models with odin. Windows users should install <a href="https://cran.r-project.org/bin/windows/Rtools/" class="external-link">Rtools</a>. See the relevant section in <a href="https://cran.r-project.org/doc/manuals/r-release/R-admin.html#The-Windows-toolset" class="external-link">R-admin</a> for advice. Be sure to select the “edit PATH” checkbox during installation or the tools will not be found.</p>
<p>The function <code><a href="reference/can_compile.html">odin::can_compile()</a></code> will check if it is able to compile things, but by the time you install the package that will probably have been satisfied.</p>
<p>The development version of the package can be installed directly from github if you prefer with:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">devtools</span><span class="fu">::</span><span class="fu">install_github</span><span class="op">(</span><span class="st">"mrc-ide/odin"</span>, upgrade <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="license">License<a class="anchor" aria-label="anchor" href="#license"></a>
</h2>
<p>MIT © Imperial College of Science, Technology and Medicine</p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://cloud.r-project.org/package=odin" class="external-link">View on CRAN</a></li>
<li><a href="https://github.com/mrc-ide/odin/" class="external-link">Browse source code</a></li>
<li><a href="https://github.com/mrc-ide/odin/issues" class="external-link">Report a bug</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li>
<a href="https://opensource.org/licenses/mit-license.php" class="external-link">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a>
</li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing odin</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Rich FitzJohn <br><small class="roles"> Author, maintainer </small>  </li>
<li><a href="authors.html">More about authors...</a></li>
</ul>
</div>

<div class="dev-status">
<h2 data-toc-skip>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://www.repostatus.org/#active" class="external-link"><img src="https://www.repostatus.org/badges/latest/active.svg" alt="Project Status: Active – The project has reached a stable, usable state and is being actively developed."></a></li>
<li><a href="https://github.com/mrc-ide/odin/actions" class="external-link"><img src="https://github.com/mrc-ide/odin/workflows/R-CMD-check/badge.svg" alt="R build status"></a></li>
<li><a href="https://cran.r-project.org/package=odin" class="external-link"><img src="https://www.r-pkg.org/badges/version/odin"></a></li>
<li><a href="https://www.codefactor.io/repository/github/mrc-ide/odin" class="external-link"><img src="https://www.codefactor.io/repository/github/mrc-ide/odin/badge" alt="CodeFactor"></a></li>
</ul>
</div>

  </div>
</div>


      <footer><div class="copyright">
  <p></p>
<p>Developed by Rich FitzJohn.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
